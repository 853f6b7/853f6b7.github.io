import{T as h,E as v}from"./EmptyState-a327e892.js";import{_ as b}from"./VmlPesquisa-987309b1.js";import{V as L}from"./VisualizarArquivoVml-18d52db7.js";import{_ as f,r,o as c,k as u,w as a,b as s,l as $,a as i,u as D,q as y,p as I,h as V,c as p,g as _,F as m,j as k,d as x,E as S,t as C}from"./index-c9d7de8a.js";import{c as E}from"./controllerbase-fca99fd1.js";import{a as N}from"./axios-4a70c6fc.js";const g=e=>(I("data-v-fe91de53"),e=e(),V(),e),j={class:"botoes-container"},q=g(()=>i("div",{class:"texto-botao"},"Visualizar",-1)),B=g(()=>i("div",{class:"texto-botao"},"Download",-1)),P={props:{actionDownload:{type:Function,default:()=>{}},actionView:{type:Function,default:()=>{}},data:{type:Object,default:{}}}},F=Object.assign(P,{__name:"DocumentoLegalItem",setup(e){return(o,t)=>{const n=r("el-col"),l=r("el-button"),d=r("el-row");return c(),u(d,null,{default:a(()=>[s(n,{span:20},{default:a(()=>[$(o.$slots,"nomearquivo",{},void 0,!0)]),_:3}),s(n,{span:4},{default:a(()=>[i("div",j,[s(l,{icon:L,onClick:t[0]||(t[0]=w=>o.$props.actionView(o.$props.data))},{default:a(()=>[q]),_:1}),s(l,{icon:D(y),onClick:t[1]||(t[1]=w=>o.$props.actionDownload(o.$props.data))},{default:a(()=>[B]),_:1},8,["icon"])])]),_:1})]),_:3})}}}),O=f(F,[["__scopeId","data-v-fe91de53"]]);const T={class:"container-documentos-legais"},A={class:"documentos-legais-lista"},R={class:"lista"},U={data:()=>({documentos:[]}),created(){this.mountGrid()},methods:{mountGrid(){const{__API:e}=this;console.log(e),this.setLoading(!0),E.Post(`${e}/DocumentosPortal/lista`,{pagina:1,registros:10,idEmpresasPortal:1}).then(o=>{this.documentos=o.data.registros}).catch(o=>{console.error(o)}).finally(o=>{this.setLoading(!1)})},viewItem(e){console.log("https://portalmultilixo.blob.core.windows.net/portalmultilixo"),console.log(e),console.log(e.path)},downloadItem(e){const o="https://portalmultilixo.blob.core.windows.net/portalmultilixo";this.setLoading(!0),N.get(`${o}${e.path}`,{responseType:"blob"}).then(t=>{var n=new Blob([t.data],{type:"application/pdf"}),l=URL.createObjectURL(n);window.open(l)}).catch(t=>{console.error(t)}).finally(t=>{this.setLoading(!1)})},setLoading(e){const o=S.service({lock:!0,text:"Carregando...",background:"rgba(0, 0, 0, 0.7)"});e||o.close()}}},z=Object.assign(U,{__name:"DocumentosLegais",setup(e){return(o,t)=>{const n=r("el-col"),l=r("el-row");return c(),p(m,null,[s(h,{title:"Documentos legais"}),s(b),i("div",T,[i("div",A,[i("div",R,[s(l,{class:"lista-header"},{default:a(()=>[s(n,{span:20},{default:a(()=>[_("Nome do arquivo")]),_:1}),s(n,{span:4},{default:a(()=>[_("Ações")]),_:1})]),_:1}),(c(!0),p(m,null,k(o.documentos,d=>(c(),u(O,{actionDownload:o.downloadItem,actionView:o.viewItem,data:d},{nomearquivo:a(()=>[_(C(d.nome),1)]),_:2},1032,["actionDownload","actionView","data"]))),256)),o.documentos.length===0?(c(),u(v,{key:0,message:"Nenhum documento encontrado"})):x("",!0)])])])],64)}}}),W=f(z,[["__scopeId","data-v-8944fa1a"]]);export{W as D};
