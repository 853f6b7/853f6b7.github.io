import{a as f,r as L,B as N,G as y,C as d}from"./GraficoIndicadores-9f543d4a.js";import{K as C,_ as h,r as P,o as t,m as n,c as m,a as s,t as g,p,j as D,b as r,d as i,q as B,E as O,w as S,F as I,i as V}from"./index-cb898d21.js";import{T as M,E as F}from"./EmptyState-e98aa727.js";import{_ as $}from"./VmlPesquisa-6c8e5af2.js";import{B as A}from"./Breadcumbs-9925c10b.js";/* empty css                                                    */f.register(...L);const w=C({name:"Home",props:{chartData:Object},components:{BarChart:N}});function z(a,e,o,l,c,u){const v=P("BarChart");return t(),n(v,{chartData:a.chartData},null,8,["chartData"])}const k=h(w,[["render",z]]);const b={props:{total:String,dataDe:String,dataAte:String}},T=a=>(p("data-v-015afe71"),a=a(),D(),a),G={class:"container"},E={class:"cinza redondo"},K=T(()=>s("div",{class:"titulo"},"Total reciclado - período",-1)),Y={class:"conteudo-container"},j={class:"conteudo"},q={class:"kgs item"},J=T(()=>s("div",{class:"separador item"},"-",-1)),R={class:"periodo item"};function H(a,e,o,l,c,u){return t(),m("div",G,[s("div",E,[K,s("div",Y,[s("div",j,[s("div",q,g(o.total),1),J,s("div",R,g(o.dataDe)+" a "+g(o.dataAte),1)])])])])}const Q=h(b,[["render",H],["__scopeId","data-v-015afe71"]]);const _=a=>(p("data-v-0ece860f"),a=a(),D(),a),U={class:"indicadorescontainer"},W={class:"item pizzaContainer"},X={class:"item"},Z={class:"item cinza redondo"},x=_(()=>s("div",{class:"titulo-total-reciclado"},"Total reciclado - ano",-1)),ee={class:"item"},ae={style:{display:"flex"}},oe=_(()=>s("div",{class:"titulo-vertical"},"Estimativa de benefícios ambientais",-1)),se={key:0,class:"msgVazioArea"},te={data:()=>({user:JSON.parse(sessionStorage.getItem("user")),dataDe:new Date().getDate(),dataAte:null,dataDeTexto:"Set/2023",dataAteTexto:"Dez/2023",somaTotal:0,user:JSON.parse(sessionStorage.getItem("user")),urlBusiness:null,selected:0,selectedBusiness:null,filterBusiness:[],tipoVisualizacao:1,chartData:{labels:["Papel (Kg)","Plástico (Kg)","Vidro (Kg)","Ferro (Kg)","Orgânico (Kg)"],datasets:[{label:"",data:[0,0,0,0,0],backgroundColor:["#006AA7","#D1250D","#015B00","#D2AB0E","#9A6233"]}]},valores:{mensagemPapel:"",mensagemPlastico:"",mensagemVidro:"",mensagemMetal:"",mensagemOrganico:""},retornoVazio:!1,retornoVazioMensagem:""}),created(){const{__API:a}=this;this.urlBusiness=`${a}/Cliente/grupo/`+this.user.idGruposClientes,this.urlIndicadores=`${a}/Vrls/indicadores`;var e=new Date;this.dataDe=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.dataAte=new Date(e.getFullYear(),e.getMonth(),e.getDate())},mounted(){this.filtrar()},watch:{selected(a){if(a)return this.selectedBusiness=this.filterBusiness[a];this.selectedBusiness=null}},methods:{filtrar(){const a=this;if(!this.dataDe||!this.dataAte)return;this.dataDeTexto=this.dataDe.getMonth()+1+"/"+this.dataDe.getFullYear(),this.dataAteTexto=this.dataAte.getMonth()+1+"/"+this.dataAte.getFullYear(),a.setLoading(!0);const e={dataInicial:this.getFirstDayOfMonth(this.dataDe),dataFinal:this.getLastDayOfMonth(this.dataAte),idGruposClientes:this.user.idGruposClientes};this.selectedBusiness&&(e.idClientes=this.selectedBusiness.idClientes,e.idLocais=this.selectedBusiness.idLocais,e.idGruposClientes=this.selectedBusiness.idGruposClientes),B.Post(this.urlIndicadores,e).then(o=>{a.setLoading(!1),o.error||(this.retornoVazio=!1,this.retornoVazioMensagem="",this.valores=o.data[0],this.chartData.datasets[0].data=[this.valores.pesoPapel,this.valores.pesoPlastico,this.valores.pesoVidro,this.valores.pesoMetal,this.valores.pesoOrganico],this.somaTotal=Math.round(this.valores.pesoPapel+this.valores.pesoPlastico+this.valores.pesoVidro+this.valores.pesoMetal+this.valores.pesoOrganico))},o=>{a.setLoading(!1),this.retornoVazio=!0,this.retornoVazioMensagem=o.response.data.message})},changePeriodoControl({start:a,end:e}){this.dataDe=a,this.dataAte=e},changeFilterBusiness(a){a?this.selectedBusiness=a:this.selectedBusiness=null},setLoading(a){const e=O.service({lock:!0,text:"Carregando...",background:"rgba(0, 0, 0, 0.7)"});a||e.close()},getLastDayOfMonth(a){const e=new Date(a),o=e.getFullYear(),l=e.getMonth(),c=new Date(o,l+1,0).getDate();return new Date(o,l,c).toISOString()},getFirstDayOfMonth(a){const e=new Date(a),o=e.getFullYear(),l=e.getMonth();return new Date(o,l,1).toISOString()}}},re=Object.assign(te,{__name:"IndicadoresBody",setup(a){return(e,o)=>(t(),m("div",null,[r(M,{title:"Indicadores"}),r($,{changeFilterBusiness:e.changeFilterBusiness,Pesquisar:e.filtrar,idGrupoClientes:e.idgruposclientes,background:"#CBD619",showPeriodoControl:!0,changePeriodoControl:e.changePeriodoControl,colorButton:"#F08327",colorTextButton:"#FFFFFF"},null,8,["changeFilterBusiness","Pesquisar","idGrupoClientes","changePeriodoControl"]),s("div",U,[s("div",W,[r(y,{chartData:e.chartData},null,8,["chartData"])]),s("div",X,[r(Q,{dataDe:e.dataDeTexto,dataAte:e.dataAteTexto,total:e.valores.pesoTotalStr},null,8,["dataDe","dataAte","total"])]),s("div",Z,[x,r(k,{"chart-data":e.chartData},null,8,["chart-data"])]),s("div",ee,[s("div",ae,[oe,e.valores.pesoPapel>0?(t(),n(d,{key:0,cor:"azul",descricao:e.valores.mensagemPapel,valor:e.valores.pesoPapelStr,icone:"papel",linha1Numero:e.valores.mensagemPapelL1,linha1Texto:e.valores.mensagemPapelL11,linha2Numero:e.valores.mensagemPapelL2,linha2Texto:e.valores.mensagemPapelL21,linha3Numero:e.valores.mensagemPapelL3,linha3Texto:e.valores.mensagemPapelL31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0),e.valores.pesoMetal>0?(t(),n(d,{key:1,cor:"amarelo",descricao:e.valores.mensagemMetal,valor:e.valores.pesoMetalStr,icone:"metal",linha1Numero:e.valores.mensagemMetalL1,linha1Texto:e.valores.mensagemMetalL11,linha2Numero:e.valores.mensagemMetalL2,linha2Texto:e.valores.mensagemMetalL21,linha3Numero:e.valores.mensagemMetalL3,linha3Texto:e.valores.mensagemMetalL31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0),e.valores.pesoPlastico>0?(t(),n(d,{key:2,cor:"vermelho",descricao:e.valores.mensagemPlastico,valor:e.valores.pesoPlasticoStr,icone:"plastico",linha1Numero:e.valores.mensagemPlasticoL1,linha1Texto:e.valores.mensagemPlasticoL11,linha2Numero:e.valores.mensagemPlasticoL2,linha2Texto:e.valores.mensagemPlasticoL21,linha3Numero:e.valores.mensagemPlasticoL3,linha3Texto:e.valores.mensagemPlasticoL31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0),e.valores.pesoVidro>0?(t(),n(d,{key:3,cor:"verde",descricao:e.valores.mensagemVidro,valor:e.valores.pesoVidroStr,icone:"vidro",linha1Numero:e.valores.mensagemVidroL1,linha1Texto:e.valores.mensagemVidroL11,linha2Numero:e.valores.mensagemVidroL2,linha2Texto:e.valores.mensagemVidroL21,linha3Numero:e.valores.mensagemVidroL3,linha3Texto:e.valores.mensagemVidroL31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0),e.valores.pesoOrganico>0?(t(),n(d,{key:4,cor:"marrom",descricao:`${e.valores.mensagemOrganico} KG`,valor:e.valores.pesoOrganicoStr,icone:"organico",linha1Numero:e.valores.mensagemOrganicoL1,linha1Texto:e.valores.mensagemOrganicoL11,linha2Numero:e.valores.mensagemOrganicoL2,linha2Texto:e.valores.mensagemOrganicoL21,linha3Numero:e.valores.mensagemOrganicoL3,linha3Texto:e.valores.mensagemOrganicoL31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0),e.valores.pesoCO2>0?(t(),n(d,{key:5,cor:"azul-co2",descricao:e.valores.mensagemCO2,valor:e.valores.pesoCO2Str,icone:"co2",linha1Numero:e.valores.mensagemCO2L1,linha1Texto:e.valores.mensagemCO2L11,linha2Numero:e.valores.mensagemCO2L2,linha2Texto:e.valores.mensagemCO2L21,linha3Numero:e.valores.mensagemCO2L3,linha3Texto:e.valores.mensagemCO2L31},null,8,["descricao","valor","linha1Numero","linha1Texto","linha2Numero","linha2Texto","linha3Numero","linha3Texto"])):i("",!0)])])]),e.retornoVazio?(t(),m("div",se,[r(F,{message:e.retornoVazioMensagem},null,8,["message"])])):i("",!0)]))}}),ie=h(re,[["__scopeId","data-v-0ece860f"]]);const ne={__name:"IndicadoresView",setup(a){return(e,o)=>(t(),m(I,null,[r(A,null,{titulo:S(()=>[V("Indicadores")]),_:1}),r(ie)],64))}},ge=h(ne,[["__scopeId","data-v-8c916146"]]);export{ge as default};
