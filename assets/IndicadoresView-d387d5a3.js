import{a as y,r as B,B as I,G as C,C as d}from"./GraficoIndicadores-484318c7.js";import{K as P,_ as u,r as S,o,m as l,c as h,a as s,t as p,p as m,j as v,b as i,d as n,q as V,E as F,w as $,F as M,i as O}from"./index-60471838.js";import{T as A,E as w}from"./EmptyState-4bc6e6cc.js";import{_ as T}from"./VmlPesquisa-5884aab9.js";import{B as z}from"./Breadcumbs-cf04dc8b.js";/* empty css                                                    */y.register(...B);const b=P({name:"Home",props:{chartData:Object},components:{BarChart:I}});function k(t,e,a,r,c,g){const _=S("BarChart");return o(),l(_,{chartData:t.chartData},null,8,["chartData"])}const G=u(b,[["render",k]]);const L={props:{total:String,dataDe:String,dataAte:String}},D=t=>(m("data-v-ed0455c4"),t=t(),v(),t),K={class:"container"},E={class:"cinza redondo"},N=D(()=>s("div",{class:"titulo"},"Total reciclado - período",-1)),Y={class:"conteudo-container"},j={class:"conteudo"},q={class:"kgs item"},J=D(()=>s("div",{class:"separador item"},"-",-1)),R={class:"periodo item"};function H(t,e,a,r,c,g){return o(),h("div",K,[s("div",E,[N,s("div",Y,[s("div",j,[s("div",q,p(a.total)+" Kg",1),J,s("div",R,p(a.dataDe)+" a "+p(a.dataAte),1)])])])])}const Q=u(L,[["render",H],["__scopeId","data-v-ed0455c4"]]);const f=t=>(m("data-v-e2e6a329"),t=t(),v(),t),U={class:"indicadorescontainer"},W={class:"item pizzaContainer"},X={class:"item"},Z={class:"item cinza redondo"},x=f(()=>s("div",{class:"titulo-total-reciclado"},"Total reciclado - ano",-1)),ee={class:"item"},te={style:{display:"flex"}},ae=f(()=>s("div",{class:"titulo-vertical"},"Estimativa de benefícios ambientais",-1)),se={key:0,class:"msgVazioArea"},oe={data:()=>({user:JSON.parse(sessionStorage.getItem("user")),dataDe:new Date().getDate(),dataAte:null,dataDeTexto:"Set/2023",dataAteTexto:"Dez/2023",somaTotal:0,user:JSON.parse(sessionStorage.getItem("user")),urlBusiness:null,selected:0,selectedBusiness:null,filterBusiness:[],tipoVisualizacao:1,chartData:{labels:["Papel (Kg)","Plástico (Kg)","Vidro (Kg)","Ferro (Kg)","Orgânico (Kg)"],datasets:[{label:"",data:[0,0,0,0,0],backgroundColor:["#006AA7","#D1250D","#015B00","#D2AB0E","#9A6233"]}]},valores:{mensagemPapel:"",mensagemPlastico:"",mensagemVidro:"",mensagemMetal:"",mensagemOrganico:""},retornoVazio:!1,retornoVazioMensagem:""}),created(){const{__API:t}=this;this.urlBusiness=`${t}/Cliente/grupo/`+this.user.idGruposClientes,this.urlIndicadores=`${t}/Vrls/indicadores`;var e=new Date;this.dataDe=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.dataAte=new Date(e.getFullYear(),e.getMonth(),e.getDate())},mounted(){this.filtrar()},watch:{selected(t){if(t)return this.selectedBusiness=this.filterBusiness[t];this.selectedBusiness=null}},methods:{filtrar(){const t=this;if(!this.dataDe||!this.dataAte)return;this.dataDeTexto=this.dataDe.getMonth()+1+"/"+this.dataDe.getFullYear(),this.dataAteTexto=this.dataAte.getMonth()+1+"/"+this.dataAte.getFullYear(),t.setLoading(!0);const e={dataInicial:this.getFirstDayOfMonth(this.dataDe),dataFinal:this.getLastDayOfMonth(this.dataAte),idGruposClientes:this.user.idGruposClientes};this.selectedBusiness&&(e.idClientes=this.selectedBusiness.idClientes,e.idLocais=this.selectedBusiness.idLocais,e.idGruposClientes=this.selectedBusiness.idGruposClientes),V.Post(this.urlIndicadores,e).then(a=>{t.setLoading(!1),a.error||(this.retornoVazio=!1,this.retornoVazioMensagem="",this.valores=a.data[0],this.chartData.datasets[0].data=[this.valores.pesoPapel,this.valores.pesoPlastico,this.valores.pesoVidro,this.valores.pesoMetal,this.valores.pesoOrganico],this.somaTotal=Math.round(this.valores.pesoPapel+this.valores.pesoPlastico+this.valores.pesoVidro+this.valores.pesoMetal+this.valores.pesoOrganico))},a=>{t.setLoading(!1),this.retornoVazio=!0,this.retornoVazioMensagem=a.response.data.message})},changePeriodoControl({start:t,end:e}){this.dataDe=t,this.dataAte=e},changeFilterBusiness(t){t?this.selectedBusiness=t:this.selectedBusiness=null},setLoading(t){const e=F.service({lock:!0,text:"Carregando...",background:"rgba(0, 0, 0, 0.7)"});t||e.close()},getLastDayOfMonth(t){const e=new Date(t),a=e.getFullYear(),r=e.getMonth(),c=new Date(a,r+1,0).getDate();return new Date(a,r,c).toISOString()},getFirstDayOfMonth(t){const e=new Date(t),a=e.getFullYear(),r=e.getMonth();return new Date(a,r,1).toISOString()}}},ie=Object.assign(oe,{__name:"IndicadoresBody",setup(t){return(e,a)=>(o(),h("div",null,[i(A,{title:"Indicadores"}),i(T,{changeFilterBusiness:e.changeFilterBusiness,Pesquisar:e.filtrar,idGrupoClientes:e.idgruposclientes,background:"#CBD619",showPeriodoControl:!0,changePeriodoControl:e.changePeriodoControl,colorButton:"#F08327",colorTextButton:"#FFFFFF"},null,8,["changeFilterBusiness","Pesquisar","idGrupoClientes","changePeriodoControl"]),s("div",U,[s("div",W,[i(C,{chartData:e.chartData},null,8,["chartData"])]),s("div",X,[i(Q,{dataDe:e.dataDeTexto,dataAte:e.dataAteTexto,total:e.somaTotal},null,8,["dataDe","dataAte","total"])]),s("div",Z,[x,i(G,{"chart-data":e.chartData},null,8,["chart-data"])]),s("div",ee,[s("div",te,[ae,e.valores.pesoPapel>0?(o(),l(d,{key:0,cor:"azul",descricao:e.valores.mensagemPapel,valor:e.valores.pesoPapel,icone:"papel"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoMetal>0?(o(),l(d,{key:1,cor:"amarelo",descricao:e.valores.mensagemMetal,valor:e.valores.pesoMetal,icone:"metal"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoPlastico>0?(o(),l(d,{key:2,cor:"vermelho",descricao:e.valores.mensagemPlastico,valor:e.valores.pesoPlastico,icone:"plastico"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoVidro>0?(o(),l(d,{key:3,cor:"verde",descricao:e.valores.mensagemVidro,valor:e.valores.pesoVidro,icone:"vidro"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoOrganico>0?(o(),l(d,{key:4,cor:"marrom",descricao:`${e.valores.mensagemOrganico} KG`,valor:e.valores.pesoOrganico,icone:"organico"},null,8,["descricao","valor"])):n("",!0)])])]),e.retornoVazio?(o(),h("div",se,[i(w,{message:e.retornoVazioMensagem},null,8,["message"])])):n("",!0)]))}}),re=u(ie,[["__scopeId","data-v-e2e6a329"]]);const ne={__name:"IndicadoresView",setup(t){return(e,a)=>(o(),h(M,null,[i(z,null,{titulo:$(()=>[O("Indicadores")]),_:1}),i(re)],64))}},pe=u(ne,[["__scopeId","data-v-8c916146"]]);export{pe as default};
