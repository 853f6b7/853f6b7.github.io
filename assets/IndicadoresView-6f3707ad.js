import{a as m,r as _,B as D,G as f,C as d}from"./GraficoIndicadores-5759c2b4.js";import{K as v,_ as h,r as B,o as a,m as l,c as u,b as o,a as r,d as n,q as y,E as C,p as I,j as P,w as F,F as V,i as S}from"./index-eae1e41d.js";import{T as w,E as M}from"./EmptyState-3382cd11.js";import{_ as O}from"./VmlPesquisa-d0151cd3.js";import{B as z}from"./Breadcumbs-469d16ee.js";/* empty css                                                    */m.register(..._);const b=v({name:"Home",props:{chartData:Object},components:{BarChart:D}});function k(s,e,t,i,c,g){const p=B("BarChart");return a(),l(p,{chartData:s.chartData},null,8,["chartData"])}const A=h(b,[["render",k]]);const G=s=>(I("data-v-97017fcf"),s=s(),P(),s),L={class:"indicadorescontainer"},$={class:"item pizzaContainer"},E=G(()=>r("div",{class:"item"}," item 2 ",-1)),K={class:"item"},N={class:"item"},T={style:{display:"flex"}},Y={key:0,class:"msgVazioArea"},j={data:()=>({user:JSON.parse(sessionStorage.getItem("user")),dataDe:new Date().getDate(),dataAte:null,user:JSON.parse(sessionStorage.getItem("user")),urlBusiness:null,selected:0,selectedBusiness:null,filterBusiness:[],tipoVisualizacao:1,chartData:{labels:["Papel (Kg)","Plástico (Kg)","Vidro (Kg)","Ferro (Kg)","Orgânico (Kg)"],datasets:[{data:[0,0,0,0,0],backgroundColor:["#006AA7","#D1250D","#015B00","#D2AB0E","#9A6233"]}]},valores:{mensagemPapel:"",mensagemPlastico:"",mensagemVidro:"",mensagemMetal:"",mensagemOrganico:""},retornoVazio:!1,retornoVazioMensagem:""}),created(){const{__API:s}=this;this.urlBusiness=`${s}/Cliente/grupo/`+this.user.idGruposClientes,this.urlIndicadores=`${s}/Vrls/indicadores`;var e=new Date;this.dataDe=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.dataAte=new Date(e.getFullYear(),e.getMonth(),e.getDate())},mounted(){this.filtrar()},watch:{selected(s){if(s)return this.selectedBusiness=this.filterBusiness[s];this.selectedBusiness=null}},methods:{filtrar(){const s=this;if(!this.dataDe||!this.dataAte)return;s.setLoading(!0);const e={dataInicial:this.getFirstDayOfMonth(this.dataDe),dataFinal:this.getLastDayOfMonth(this.dataAte),idGruposClientes:this.user.idGruposClientes};this.selectedBusiness&&(e.idClientes=this.selectedBusiness.idClientes,e.idLocais=this.selectedBusiness.idLocais,e.idGruposClientes=this.selectedBusiness.idGruposClientes),y.Post(this.urlIndicadores,e).then(t=>{s.setLoading(!1),t.error||(this.retornoVazio=!1,this.retornoVazioMensagem="",this.valores=t.data[0],this.chartData.datasets[0].data=[this.valores.pesoPapel,this.valores.pesoPlastico,this.valores.pesoVidro,this.valores.pesoMetal,this.valores.pesoOrganico])},t=>{s.setLoading(!1),this.retornoVazio=!0,this.retornoVazioMensagem=t.response.data.message})},changePeriodoControl({start:s,end:e}){this.dataDe=s,this.dataAte=e},changeFilterBusiness(s){s?this.selectedBusiness=s:this.selectedBusiness=null},setLoading(s){const e=C.service({lock:!0,text:"Carregando...",background:"rgba(0, 0, 0, 0.7)"});s||e.close()},getLastDayOfMonth(s){const e=new Date(s),t=e.getFullYear(),i=e.getMonth(),c=new Date(t,i+1,0).getDate();return new Date(t,i,c).toISOString()},getFirstDayOfMonth(s){const e=new Date(s),t=e.getFullYear(),i=e.getMonth();return new Date(t,i,1).toISOString()}}},q=Object.assign(j,{__name:"IndicadoresBody",setup(s){return(e,t)=>(a(),u("div",null,[o(w,{title:"Indicadores"}),o(O,{changeFilterBusiness:e.changeFilterBusiness,Pesquisar:e.filtrar,idGrupoClientes:e.idgruposclientes,background:"#CBD619",showPeriodoControl:!0,changePeriodoControl:e.changePeriodoControl,colorButton:"#F08327",colorTextButton:"#FFFFFF"},null,8,["changeFilterBusiness","Pesquisar","idGrupoClientes","changePeriodoControl"]),r("div",L,[r("div",$,[o(f,{chartData:e.chartData},null,8,["chartData"])]),E,r("div",K,[o(A,{"chart-data":e.chartData},null,8,["chart-data"])]),r("div",N,[r("div",T,[e.valores.pesoPapel>0?(a(),l(d,{key:0,cor:"azul",descricao:e.valores.mensagemPapel,valor:e.valores.pesoPapel,icone:"papel"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoMetal>0?(a(),l(d,{key:1,cor:"amarelo",descricao:e.valores.mensagemMetal,valor:e.valores.pesoMetal,icone:"metal"},null,8,["descricao","valor"])):n("",!0),e.valores.pesoPlastico>0?(a(),l(d,{key:2,cor:"vermelho",descricao:e.valores.mensagemPlastico,valor:e.valores.pesoPlastico,icone:"plastico"},null,8,["descricao","valor"])):n("",!0)])])]),e.retornoVazio?(a(),u("div",Y,[o(M,{message:e.retornoVazioMensagem},null,8,["message"])])):n("",!0)]))}}),J=h(q,[["__scopeId","data-v-97017fcf"]]);const H={__name:"IndicadoresView",setup(s){return(e,t)=>(a(),u(V,null,[o(z,null,{titulo:F(()=>[S("Indicadores")]),_:1}),o(J)],64))}},x=h(H,[["__scopeId","data-v-8c916146"]]);export{x as default};
